# Zellij カンペ

設定ファイル: `modules/programs/zellij.nix`

## 現在の設定

- **テーマ**: Catppuccin Mocha
- **レイアウト**: compact（ステータスバー最小）
- **マウス**: 有効
- **コピー**: 選択時自動コピー
- **ペイン枠**: 表示

## 起動

```bash
zellij                    # 新規セッション
zellij attach             # 既存セッションにアタッチ
zellij attach -c main     # mainセッション（なければ作成）
zellij list-sessions      # セッション一覧
```

## カスタムキーバインド（ノーマルモード）

### ペイン操作

| キー | 動作 |
|------|------|
| `Alt+n` | 右にペイン追加 |
| `Alt+d` | 下にペイン追加 |
| `Alt+w` | ペインを閉じる |
| `Alt+f` | フルスクリーン切替 |
| `Alt+z` | フロートペイン切替 |

### ペイン移動

| キー | 動作 |
|------|------|
| `Alt+h` | 左のペインへ |
| `Alt+j` | 下のペインへ |
| `Alt+k` | 上のペインへ |
| `Alt+l` | 右のペインへ |

### ペインリサイズ

| キー | 動作 |
|------|------|
| `Alt+Shift+H` | 左方向に拡大 |
| `Alt+Shift+J` | 下方向に拡大 |
| `Alt+Shift+K` | 上方向に拡大 |
| `Alt+Shift+L` | 右方向に拡大 |

### タブ

| キー | 動作 |
|------|------|
| `Alt+1-5` | タブ1-5へ切り替え |

## デフォルトキーバインド

### モード切り替え

| キー | 動作 |
|------|------|
| `Ctrl+p` | Paneモード |
| `Ctrl+t` | Tabモード |
| `Ctrl+n` | Resizeモード |
| `Ctrl+s` | Scrollモード |
| `Ctrl+o` | Sessionモード |
| `Ctrl+g` | Lockedモード（キー無効化） |
| `Esc` | Normalモードに戻る |

### Paneモード (`Ctrl+p`)

| キー | 動作 |
|------|------|
| `n` | 新しいペイン（下） |
| `d` | 新しいペイン（下） |
| `r` | 新しいペイン（右） |
| `x` | ペインを閉じる |
| `f` | フルスクリーン切替 |
| `z` | フロートペイン切替 |
| `hjkl` / `←↓↑→` | ペイン移動 |

### Tabモード (`Ctrl+t`)

| キー | 動作 |
|------|------|
| `n` | 新しいタブ |
| `x` | タブを閉じる |
| `r` | タブ名を変更 |
| `h` / `l` | 前/次のタブ |
| `1-9` | タブ番号へ移動 |

### Resizeモード (`Ctrl+n`)

| キー | 動作 |
|------|------|
| `hjkl` / `←↓↑→` | ペインサイズ変更 |
| `+` / `-` | 拡大/縮小 |

### Scrollモード (`Ctrl+s`)

| キー | 動作 |
|------|------|
| `j` / `k` | 上下スクロール |
| `d` / `u` | 半ページスクロール |
| `/` | 検索 |

### Sessionモード (`Ctrl+o`)

| キー | 動作 |
|------|------|
| `d` | セッションからデタッチ |
| `w` | セッションマネージャ |

## Neovim連携

### 外部コマンドでペイン操作

```bash
# 右にペインを開いてコマンド実行
zellij run -d right -- htop

# フローティングペインで実行
zellij run -f -- lazygit

# 現在のペインでコマンド実行
zellij run -- ls -la
```

## Tips

- **セッション永続化**: デタッチ (`Ctrl+o d`) してもセッションは残る
- **再接続**: `zellij attach` で戻れる
- **複数セッション**: プロジェクトごとにセッションを分けると便利
- **Neovim内ターミナル**: 緊急時は `<Space>t1-4` で従来通り使える
